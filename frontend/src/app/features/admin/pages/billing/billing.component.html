<div class="header">
  <h5>Billing</h5>
  <nz-input-group [nzPrefix]="suffixIconSearch">
    <input type="text" nz-input placeholder="Search..." />
  </nz-input-group>
  <ng-template #suffixIconSearch>
    <i nz-icon nzType="search"></i>
  </ng-template>
</div>
<br />

<div class="toolbar">
  <nz-select
    nzShowSearch
    nzAllowClear
    nzPlaceHolder="Select a type..."
    [(ngModel)]="selectedType"
  >
    <nz-option nzLabel="Country" nzValue="Country"></nz-option>
    <nz-option nzLabel="State" nzValue="State"></nz-option>
    <nz-option nzLabel="City" nzValue="City"></nz-option>
  </nz-select>
  <nz-select
    nzShowSearch
    nzAllowClear
    nzPlaceHolder="Select a city"
    [(ngModel)]="selectedCity"
  >
    <nz-option nzLabel="Slidell" nzValue="Slidell"></nz-option>
  </nz-select>
  <nz-select
    nzShowSearch
    nzAllowClear
    nzPlaceHolder="Select a county/parish"
    [(ngModel)]="selectedCountry"
  >
    <nz-option nzLabel="Pinellas" nzValue="Pinellas"></nz-option>
  </nz-select>
  <nz-select
    nzShowSearch
    nzAllowClear
    nzPlaceHolder="Select a state"
    [(ngModel)]="selectedState"
  >
    <nz-option nzLabel="Florida" nzValue="jack"></nz-option>
  </nz-select>
  <nz-select
    nzShowSearch
    nzAllowClear
    nzPlaceHolder="Select a status"
    [(ngModel)]="selectedStatus"
  >
    <nz-option nzLabel="Active" nzValue="Active"></nz-option>
    <nz-option nzLabel="Pending" nzValue="Pending"></nz-option>
  </nz-select>
  <button nz-button (click)="addRow()" nzType="primary">New</button>
</div>
<br />

<nz-table #editRowTable nzBordered [nzData]="listOfData" nzTableLayout="fixed">
  <thead>
    <tr>
      <th>Id</th>
      <th>Type</th>
      <th>City</th>
      <th>County/Parish</th>
      <th>State</th>
      <th>Start date</th>
      <th>End Date</th>
      <th>Status</th>
      <th>Discount %</th>
      <th>Users</th>
      <th>Action</th>
    </tr>
  </thead>
  <tbody>
    <tr *ngFor="let data of editRowTable.data">
      <ng-container *ngIf="!editCache[data.id].edit; else editTemplate">
        <td>{{ data.id }}</td>
        <td>{{ data.type }}</td>
        <td>{{ data.city }}</td>
        <td>{{ data.countriy }}</td>
        <td>{{ data.state }}</td>
        <td>{{ data.startDate }}</td>
        <td>{{ data.endDate }}</td>
        <td>{{ data.status }}</td>
        <td>{{ data.discount }}%</td>
        <td>{{ data.users }}</td>
        <td><a (click)="startEdit(data.id)">Edit</a></td>
      </ng-container>
      <ng-template #editTemplate>
        <td>{{ data.id }}</td>
        <td>
          <input
            type="text"
            nz-input
            [(ngModel)]="editCache[data.id].data.type"
          />
        </td>
        <td>
          <input
            type="text"
            nz-input
            [(ngModel)]="editCache[data.id].data.city"
          />
        </td>
        <td>
          <input
            type="text"
            nz-input
            [(ngModel)]="editCache[data.id].data.countriy"
          />
        </td>
        <td>
          <input
            type="text"
            nz-input
            [(ngModel)]="editCache[data.id].data.state"
          />
        </td>
        <td>
          <input
            type="text"
            nz-input
            [(ngModel)]="editCache[data.id].data.startDate"
          />
        </td>
        <td>
          <input
            type="text"
            nz-input
            [(ngModel)]="editCache[data.id].data.endDate"
          />
        </td>
        <td>
          <input
            type="text"
            nz-input
            [(ngModel)]="editCache[data.id].data.status"
          />
        </td>
        <td>
          <input
            type="text"
            nz-input
            [(ngModel)]="editCache[data.id].data.discount"
          />
        </td>
        <td>
          <input
            type="text"
            nz-input
            [(ngModel)]="editCache[data.id].data.users"
          />
        </td>
        <td>
          <a (click)="saveEdit(data.id)" class="save">Save</a>
          <a
            nz-popconfirm
            nzPopconfirmTitle="Sure to cancel?"
            (nzOnConfirm)="cancelEdit(data.id)"
            >Cancel</a
          >
        </td>
      </ng-template>
    </tr>
  </tbody>
</nz-table>
